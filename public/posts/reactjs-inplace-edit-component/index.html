<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>ReactJS - Inplace Edit component | limistah</title>
<meta name=keywords content="ReactJS"><meta name=description content="Last time, I was trying to render a data table and I thought that I should make some fields editable right in the table listing. It is interesting to note that I never thought about any NPM library for it, so I went all out to create a simple but effective solution for myself.
In this post, I will demonstrate how I created an editable component. The component would be able to use different form fields and notify the parent if any change has been made."><meta name=author content="AI"><link rel=canonical href=https://limistah.dev/posts/reactjs-inplace-edit-component/><link crossorigin=anonymous href=/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z+V9+cO1A=" rel="preload stylesheet" as=style><link rel=icon href=https://limistah.dev/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://limistah.dev/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://limistah.dev/favicon-32x32.png><link rel=apple-touch-icon href=https://limistah.dev/apple-touch-icon.png><link rel=mask-icon href=https://limistah.dev/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="ReactJS - Inplace Edit component"><meta property="og:description" content="Last time, I was trying to render a data table and I thought that I should make some fields editable right in the table listing. It is interesting to note that I never thought about any NPM library for it, so I went all out to create a simple but effective solution for myself.
In this post, I will demonstrate how I created an editable component. The component would be able to use different form fields and notify the parent if any change has been made."><meta property="og:type" content="article"><meta property="og:url" content="https://limistah.dev/posts/reactjs-inplace-edit-component/"><meta property="og:image" content="https://limistah.dev/images/papermod-cover.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-01-20T00:00:00+00:00"><meta property="article:modified_time" content="2020-01-20T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://limistah.dev/images/papermod-cover.png"><meta name=twitter:title content="ReactJS - Inplace Edit component"><meta name=twitter:description content="Last time, I was trying to render a data table and I thought that I should make some fields editable right in the table listing. It is interesting to note that I never thought about any NPM library for it, so I went all out to create a simple but effective solution for myself.
In this post, I will demonstrate how I created an editable component. The component would be able to use different form fields and notify the parent if any change has been made."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://limistah.dev/posts/"},{"@type":"ListItem","position":2,"name":"ReactJS - Inplace Edit component","item":"https://limistah.dev/posts/reactjs-inplace-edit-component/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"ReactJS - Inplace Edit component","name":"ReactJS - Inplace Edit component","description":"Last time, I was trying to render a data table and I thought that I should make some fields editable right in the table listing. It is interesting to note that I never thought about any NPM library for it, so I went all out to create a simple but effective solution for myself.\nIn this post, I will demonstrate how I created an editable component. The component would be able to use different form fields and notify the parent if any change has been made.","keywords":["ReactJS"],"articleBody":"Last time, I was trying to render a data table and I thought that I should make some fields editable right in the table listing. It is interesting to note that I never thought about any NPM library for it, so I went all out to create a simple but effective solution for myself.\nIn this post, I will demonstrate how I created an editable component. The component would be able to use different form fields and notify the parent if any change has been made. That said, Letâ€™s moveâ€¦.\nTo start with, I will define the usage that I had for the component. The component to be was consumed like this:\n\u003cInplaceEdit isUpdatingId={true || false} id={idForTheField || \"\"} updateKey={keyToReturnAnObjectWith || \"\"} onUpdate={functionToCallForTheUpdate || () =\u003e {}} text={textForDisplay || \"\"} defaultValue={defaultInCaseValueDoesNotMatch || \"\"} inputType={htmlInputType || \"text\"} selectOptions={ optionForSelectInputType || [ { value: true, label: \"Yes\" }, { value: false, label: \"No\" } ]} valueToText={ functionToConvertFieldValueToText || value =\u003e (value === \"true\" ? \"Yes\" : \"No\")} /\u003e; With this, I was able to use the InplaceEdit component almost anywhere that I wanted as far as single value was expected.\nNow, building for the usage. Firstly, I defined the InplaceEdit component:\nimport React from \"react\" // I won't repeat this after now function InplaceEdit() { return ( \u003cdiv\u003e Inplace Edit Component \u003c/div\u003e ); } export default InplaceEdit; // I won't repeat this after now Next, I wanted to toggle between two modes. One being a normal text, and the other when it is a form field. To do this, I added an onClick handler to the root div element, which updates a state that determines these modes.\nfunction InplaceEdit() { const [showEditor, updateShowEditor] = React.useState(false); const handleShowEditor = () =\u003e { updateShowEditor(true); }; return ( \u003cdiv onClick={handleShowEditor} style={{ cursor: \"pointer\" }}\u003e {showEditor ? \"Show Editor\" : \"Show Text\"} \u003c/div\u003e ); } Next, I required two distinct components for both the editor and display, I called them EditDisplay and TextDisplay, respectively. This made the InplaceEdit component looked more like this:\nfunction InplaceEdit() { const [showEditor, updateShowEditor] = React.useState(false); const handleShowEditor = () =\u003e { updateShowEditor(true); }; return ( \u003cdiv onClick={handleShowEditor} style={{ cursor: \"pointer\" }}\u003e {showEditor ? \u003cEditDisplay/\u003e : \u003cTextDisplay /\u003e} \u003c/div\u003e ); } After that, I defined the EditDisplay component and TextDisplay components:\n// EditDisplay Component function EditDisplay() { return ( \u003c\u003e\u003c/\u003e ); } // Text display component const TextDisplay = () =\u003e \u003c\u003e\u003c/\u003e; So, at this point, I was able to toggle between two modes, but nothing happens and nothing is rendered, yet. To move forward, I had to display the text which would be received by the InplaceEdit component and passed to the TextDisplay component as props. The below code is what I implemented for this phase:\n// EditDisplay Component function EditDisplay() { return ( \u003c\u003e\u003c/\u003e ); } // Text display component const TextDisplay = ({text}) =\u003e \u003cspan\u003e{text}\u003c/span\u003e; function InplaceEdit({ text }) { const [showEditor, updateShowEditor] = React.useState(false); const handleShowEditor = () =\u003e { updateShowEditor(true); }; return ( \u003cdiv onClick={handleShowEditor} style={{ cursor: \"pointer\" }}\u003e {showEditor ? \u003cEditDisplay/\u003e : \u003cTextDisplay text={text} /\u003e} \u003c/div\u003e ); } I was glad when I got to this point. I am sure you are as well, at least, something is getting rendered.\nIt is very correct if you guessed that the TextDisplay component will not change its state afterwards, and bulk of the work is around the EditDisplay component. So, sorry, I wonâ€™t be adding that style that you are thinking.\nThe next move I made was to tell the EditDisplay what type of edit is required and the default value for the edit.\n// EditDisplay Component function EditDisplay({ defaultValue, inputType }) { return \u003c\u003e\u003c/\u003e } // Text display component const TextDisplay = ({ text }) =\u003e \u003cspan\u003e{text}\u003c/span\u003e function InplaceEdit({ text, inputType, defaultValue }) { const [showEditor, updateShowEditor] = React.useState(false) const handleShowEditor = () =\u003e { updateShowEditor(true) } return ( \u003cdiv onClick={handleShowEditor} style={{ cursor: \"pointer\" }}\u003e {showEditor ? ( \u003cEditDisplay inputType={inputType || \"text\"} defaultValue={defaultValue} /\u003e ) : ( \u003cTextDisplay text={text} /\u003e )} \u003c/div\u003e ) } The defaultValue and inputType are both passed from the InplaceEdit component and passed down to the EditDisplay component, the inputType is short-circuited to return text in case the defaultValue is not set. Not that bad, right?\nThe next step is that, I put up some input components for the update. I had TextInput which looked like this:\nconst TextInput = ({ type, defaultValue, onBlur, disabled }) =\u003e { const handleKeyUp = e =\u003e { if (e.keyCode === 13) { onBlur(e); } }; const inputRef = React.useRef(); React.useEffect(() =\u003e { inputRef.current.focus(); }, [inputRef]); return ( \u003cinput ref={inputRef} type={type} defaultValue={defaultValue} onBlur={onBlur} disabled={disabled} onKeyUp={handleKeyUp} /\u003e ); }; This componentTextInput does a pretty interesting stuff, first, it handles the KeyUp event which sends information up to the parent(InplaceEdit) component, it can be disabled, the type is set as from the parent and the defaultValue is also configurable through the props.\nAnd the SelectInput, I defined it to look like this:\nconst SelectInput = ({ options, defaultValue, onBlur, disabled }) =\u003e { return ( \u003cselect onChange={onBlur} defaultValue={defaultValue} disabled={disabled}\u003e {options.map(option =\u003e { return \u003coption value={option.value}\u003e{option.label}\u003c/option\u003e; })} \u003c/select\u003e ); }; This component(SelectInput) accepts the options as an array of object with label and value keys, defaultValue for persistence, onBlur event handler and can be disabled by setting its disabled props. Not too serious, I think.\nFor the EditDisplay, I had to render one of the two types of components based on the inputType props:\nconst EditDisplay = ({ inputType, onchange, defaultValue, selectOptions, onBlur, disabled }) =\u003e { return ( \u003c\u003e {inputType === \"select\" \u0026\u0026 ( \u003cSelectInput options={selectOptions} defaultValue={defaultValue} onchange={onchange} onBlur={onBlur} disabled={disabled} /\u003e )} {[\"text\", \"password\"].includes(inputType) \u0026\u0026 ( \u003cTextInput type={inputType} onchange={onchange} /\u003e )} \u003c/\u003e ); }; Next, I thought, the EditDisplay component receives some props that are not yet defined in the InplaceEdit component, so I defined them like so:\nfunction InplaceEdit({ text, inputType, defaultValue, valueToText, updateKey, onUpdate, }) { const [showEditor, updateShowEditor] = React.useState(false) // Keeps the text synchronized const [displayText, updateDisplayText] = React.useState(text) const handleShowEditor = () =\u003e { updateShowEditor(true) } // Callback for the onBlur event handler const handleEditorInputChange = React.useCallback(e =\u003e { const value = e.currentTarget.value // Converts the value to a displayable text using a function from the parent consumer const text = typeof valueToText === \"function\" ? valueToText(value) : value // Updates the display text for synchronization updateDisplayText(text) // Hides the editor updateShowEditor(false) if (defaultValue !== value) { // If the value has changed, we need to tell the consumer parents about it const handler = typeof onUpdate === \"function\" ? onUpdate : () =\u003e {} // Sets the data returning an object containing the value in the updateKey or just the value itself const data = updateKey ? { [updateKey]: value } : value // Call the update function with the data and resource id handler(data, id) } }) return ( \u003c\u003e \u003cdiv onClick={handleShowEditor} style={{ cursor: \"pointer\" }}\u003e {showEditor ? ( \u003cEditDisplay inputType={inputType || \"text\"} defaultValue={defaultValue} onBlur={handleEditorInputChange} selectOptions={selectOptions} disabled={isUpdatingId === id} /\u003e ) : ( \u003cTextDisplay text={displayText} /\u003e )} \u003c/div\u003e \u003c/\u003e ) } Noticeable from the above snippet is that, the disabled prop is only set if the isUpdatingId is equals to the id props, and the now receives a displayText state which is synchronized across the two children of InplaceEdit component.\nAnd guess what, that is all there is to an InplaceEdit component that returns just a single value. It should accept a value/text and toggles between input and text states, too damn simple, I think.\nConclusion This was a very interesting process for me, and I never regret it and never will. There are awesome React components for this and does better job than my local component. But I thougth, I should experiment a bit, and here I have it.\nThe full code is available as a gist here, if you want to check it out. And, thank you for reading.\nDhanyavaad! ðŸ™‡\n","wordCount":"1314","inLanguage":"en","datePublished":"2020-01-20T00:00:00Z","dateModified":"2020-01-20T00:00:00Z","author":{"@type":"Person","name":"AI"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://limistah.dev/posts/reactjs-inplace-edit-component/"},"publisher":{"@type":"Organization","name":"limistah","logo":{"@type":"ImageObject","url":"https://limistah.dev/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://limistah.dev accesskey=h title="limistah (Alt + H)">limistah</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://limistah.dev/blog title=Blog><span>Blog</span></a></li><li><a href=https://limistah.dev/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://limistah.dev>Home</a>&nbsp;Â»&nbsp;<a href=https://limistah.dev/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">ReactJS - Inplace Edit component</h1><div class=post-meta><span title='2020-01-20 00:00:00 +0000 UTC'>January 20, 2020</span>&nbsp;Â·&nbsp;7 min&nbsp;Â·&nbsp;AI&nbsp;|&nbsp;<a href=https://github.com/limistah/limistah.xyz/tree/main/content/posts/reactjs-inplace-edit-component.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#conclusion aria-label=Conclusion>Conclusion</a></li></ul></div></details></div><div class=post-content><p>Last time, I was trying to render a data table and I thought that I should make some fields <em>editable</em> right in the table listing. It is interesting to note that I never thought about any <a href=https://www.npmjs.com/>NPM</a> library for it, so I went all out to create a simple but <a href=https://gist.github.com/limistah/b91b5429c0a4f8062b26445d12877361>effective solution for myself</a>.</p><p>In this post, I will demonstrate how I created an editable component. The component would be able to use different form fields and notify the parent if any change has been made. That said, Let&rsquo;s move&mldr;.</p><p>To start with, I will define the usage that I had for the component. The component to be was consumed like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>InplaceEdit</span>
</span></span><span class=line><span class=cl>  <span class=nx>isUpdatingId</span><span class=o>=</span><span class=p>{</span><span class=kc>true</span> <span class=o>||</span> <span class=kc>false</span><span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=nx>id</span><span class=o>=</span><span class=p>{</span><span class=nx>idForTheField</span> <span class=o>||</span> <span class=s2>&#34;&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=nx>updateKey</span><span class=o>=</span><span class=p>{</span><span class=nx>keyToReturnAnObjectWith</span> <span class=o>||</span> <span class=s2>&#34;&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=nx>onUpdate</span><span class=o>=</span><span class=p>{</span><span class=nx>functionToCallForTheUpdate</span> <span class=o>||</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{}}</span>
</span></span><span class=line><span class=cl>  <span class=nx>text</span><span class=o>=</span><span class=p>{</span><span class=nx>textForDisplay</span> <span class=o>||</span> <span class=s2>&#34;&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=nx>defaultValue</span><span class=o>=</span><span class=p>{</span><span class=nx>defaultInCaseValueDoesNotMatch</span> <span class=o>||</span> <span class=s2>&#34;&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=nx>inputType</span><span class=o>=</span><span class=p>{</span><span class=nx>htmlInputType</span> <span class=o>||</span> <span class=s2>&#34;text&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=nx>selectOptions</span><span class=o>=</span><span class=p>{</span> <span class=nx>optionForSelectInputType</span> <span class=o>||</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=nx>value</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=nx>label</span><span class=o>:</span> <span class=s2>&#34;Yes&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=nx>value</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span> <span class=nx>label</span><span class=o>:</span> <span class=s2>&#34;No&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>]}</span>
</span></span><span class=line><span class=cl>  <span class=nx>valueToText</span><span class=o>=</span><span class=p>{</span> <span class=nx>functionToConvertFieldValueToText</span> <span class=o>||</span> <span class=nx>value</span> <span class=p>=&gt;</span> <span class=p>(</span><span class=nx>value</span> <span class=o>===</span> <span class=s2>&#34;true&#34;</span> <span class=o>?</span> <span class=s2>&#34;Yes&#34;</span> <span class=o>:</span> <span class=s2>&#34;No&#34;</span><span class=p>)}</span>
</span></span><span class=line><span class=cl><span class=err>/&gt;;</span>
</span></span></code></pre></div><p>With this, I was able to use the InplaceEdit component almost anywhere that I wanted as far as single value was expected.</p><p>Now, building for the usage. Firstly, I defined the InplaceEdit component:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>import</span> <span class=nx>React</span> <span class=nx>from</span> <span class=s2>&#34;react&#34;</span> <span class=c1>// I won&#39;t repeat this after now
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>InplaceEdit</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=nx>div</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=nx>Inplace</span> <span class=nx>Edit</span> <span class=nx>Component</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>InplaceEdit</span><span class=p>;</span> <span class=c1>// I won&#39;t repeat this after now
</span></span></span></code></pre></div><p>Next, I wanted to toggle between two modes. One being a normal text, and the other when it is a form field. To do this, I added an <code>onClick</code> handler to the root <code>div</code> element, which updates a state that determines these modes.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>function</span> <span class=nx>InplaceEdit</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>[</span><span class=nx>showEditor</span><span class=p>,</span> <span class=nx>updateShowEditor</span><span class=p>]</span> <span class=o>=</span> <span class=nx>React</span><span class=p>.</span><span class=nx>useState</span><span class=p>(</span><span class=kc>false</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>handleShowEditor</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>updateShowEditor</span><span class=p>(</span><span class=kc>true</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=nx>div</span> <span class=nx>onClick</span><span class=o>=</span><span class=p>{</span><span class=nx>handleShowEditor</span><span class=p>}</span> <span class=nx>style</span><span class=o>=</span><span class=p>{{</span> <span class=nx>cursor</span><span class=o>:</span> <span class=s2>&#34;pointer&#34;</span> <span class=p>}}</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span><span class=nx>showEditor</span> <span class=o>?</span> <span class=s2>&#34;Show Editor&#34;</span> <span class=o>:</span> <span class=s2>&#34;Show Text&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Next, I required two distinct components for both the editor and display, I called them <code>EditDisplay</code> and <code>TextDisplay</code>, respectively. This made the InplaceEdit component looked more like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>function</span> <span class=nx>InplaceEdit</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>[</span><span class=nx>showEditor</span><span class=p>,</span> <span class=nx>updateShowEditor</span><span class=p>]</span> <span class=o>=</span> <span class=nx>React</span><span class=p>.</span><span class=nx>useState</span><span class=p>(</span><span class=kc>false</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>handleShowEditor</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>updateShowEditor</span><span class=p>(</span><span class=kc>true</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=nx>div</span> <span class=nx>onClick</span><span class=o>=</span><span class=p>{</span><span class=nx>handleShowEditor</span><span class=p>}</span> <span class=nx>style</span><span class=o>=</span><span class=p>{{</span> <span class=nx>cursor</span><span class=o>:</span> <span class=s2>&#34;pointer&#34;</span> <span class=p>}}</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span><span class=nx>showEditor</span> <span class=o>?</span> <span class=o>&lt;</span><span class=nx>EditDisplay</span><span class=o>/&gt;</span> <span class=o>:</span> <span class=o>&lt;</span><span class=nx>TextDisplay</span> <span class=o>/&gt;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>After that, I defined the <code>EditDisplay</code> component and <code>TextDisplay</code> components:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c1>// EditDisplay Component
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>EditDisplay</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;&gt;&lt;</span><span class=err>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Text display component
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>TextDisplay</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=o>&lt;&gt;&lt;</span><span class=err>/&gt;;</span>
</span></span></code></pre></div><p>So, at this point, I was able to toggle between two modes, but nothing happens and nothing is rendered, yet. To move forward, I had to display the text which would be received by the <code>InplaceEdit</code> component and passed to the <code>TextDisplay</code> component as props. The below code is what I implemented for this phase:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// EditDisplay Component
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>EditDisplay</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;&gt;&lt;</span><span class=err>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Text display component
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>TextDisplay</span> <span class=o>=</span> <span class=p>({</span><span class=nx>text</span><span class=p>})</span> <span class=p>=&gt;</span> <span class=o>&lt;</span><span class=nx>span</span><span class=o>&gt;</span><span class=p>{</span><span class=nx>text</span><span class=p>}</span><span class=o>&lt;</span><span class=err>/span&gt;;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>InplaceEdit</span><span class=p>({</span> <span class=nx>text</span> <span class=p>})</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>[</span><span class=nx>showEditor</span><span class=p>,</span> <span class=nx>updateShowEditor</span><span class=p>]</span> <span class=o>=</span> <span class=nx>React</span><span class=p>.</span><span class=nx>useState</span><span class=p>(</span><span class=kc>false</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>handleShowEditor</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>updateShowEditor</span><span class=p>(</span><span class=kc>true</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=nx>div</span> <span class=nx>onClick</span><span class=o>=</span><span class=p>{</span><span class=nx>handleShowEditor</span><span class=p>}</span> <span class=nx>style</span><span class=o>=</span><span class=p>{{</span> <span class=nx>cursor</span><span class=o>:</span> <span class=s2>&#34;pointer&#34;</span> <span class=p>}}</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span><span class=nx>showEditor</span> <span class=o>?</span> <span class=o>&lt;</span><span class=nx>EditDisplay</span><span class=o>/&gt;</span> <span class=o>:</span> <span class=o>&lt;</span><span class=nx>TextDisplay</span> <span class=nx>text</span><span class=o>=</span><span class=p>{</span><span class=nx>text</span><span class=p>}</span> <span class=o>/&gt;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>I was glad when I got to this point. I am sure you are as well, at least, something is getting rendered.</p><p>It is very correct if you guessed that the TextDisplay component will not change its state afterwards, and bulk of the work is around the <code>EditDisplay</code> component. So, sorry, I won&rsquo;t be adding that style that you are thinking.</p><p>The next move I made was to tell the EditDisplay what type of edit is required and the default value for the edit.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c1>// EditDisplay Component
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>EditDisplay</span><span class=p>({</span> <span class=nx>defaultValue</span><span class=p>,</span> <span class=nx>inputType</span> <span class=p>})</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=o>&lt;&gt;&lt;</span><span class=err>/&gt;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Text display component
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>TextDisplay</span> <span class=o>=</span> <span class=p>({</span> <span class=nx>text</span> <span class=p>})</span> <span class=p>=&gt;</span> <span class=o>&lt;</span><span class=nx>span</span><span class=o>&gt;</span><span class=p>{</span><span class=nx>text</span><span class=p>}</span><span class=o>&lt;</span><span class=err>/span&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>InplaceEdit</span><span class=p>({</span> <span class=nx>text</span><span class=p>,</span> <span class=nx>inputType</span><span class=p>,</span> <span class=nx>defaultValue</span> <span class=p>})</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>[</span><span class=nx>showEditor</span><span class=p>,</span> <span class=nx>updateShowEditor</span><span class=p>]</span> <span class=o>=</span> <span class=nx>React</span><span class=p>.</span><span class=nx>useState</span><span class=p>(</span><span class=kc>false</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>handleShowEditor</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>updateShowEditor</span><span class=p>(</span><span class=kc>true</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=nx>div</span> <span class=nx>onClick</span><span class=o>=</span><span class=p>{</span><span class=nx>handleShowEditor</span><span class=p>}</span> <span class=nx>style</span><span class=o>=</span><span class=p>{{</span> <span class=nx>cursor</span><span class=o>:</span> <span class=s2>&#34;pointer&#34;</span> <span class=p>}}</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span><span class=nx>showEditor</span> <span class=o>?</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>EditDisplay</span>
</span></span><span class=line><span class=cl>          <span class=nx>inputType</span><span class=o>=</span><span class=p>{</span><span class=nx>inputType</span> <span class=o>||</span> <span class=s2>&#34;text&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>          <span class=nx>defaultValue</span><span class=o>=</span><span class=p>{</span><span class=nx>defaultValue</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>)</span> <span class=o>:</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>TextDisplay</span> <span class=nx>text</span><span class=o>=</span><span class=p>{</span><span class=nx>text</span><span class=p>}</span> <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>)}</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>The <code>defaultValue</code> and <code>inputType</code> are both passed from the <code>InplaceEdit</code> component and passed down to the <code>EditDisplay</code> component, the <code>inputType</code> is short-circuited to return <code>text</code> in case the defaultValue is not set. Not that bad, right?</p><p>The next step is that, I put up some <code>input</code> components for the update. I had <code>TextInput</code> which looked like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>TextInput</span> <span class=o>=</span> <span class=p>({</span> <span class=nx>type</span><span class=p>,</span> <span class=nx>defaultValue</span><span class=p>,</span> <span class=nx>onBlur</span><span class=p>,</span> <span class=nx>disabled</span> <span class=p>})</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>handleKeyUp</span> <span class=o>=</span> <span class=nx>e</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>e</span><span class=p>.</span><span class=nx>keyCode</span> <span class=o>===</span> <span class=mi>13</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>onBlur</span><span class=p>(</span><span class=nx>e</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>inputRef</span> <span class=o>=</span> <span class=nx>React</span><span class=p>.</span><span class=nx>useRef</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=nx>React</span><span class=p>.</span><span class=nx>useEffect</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>inputRef</span><span class=p>.</span><span class=nx>current</span><span class=p>.</span><span class=nx>focus</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span> <span class=p>[</span><span class=nx>inputRef</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=nx>input</span>
</span></span><span class=line><span class=cl>      <span class=nx>ref</span><span class=o>=</span><span class=p>{</span><span class=nx>inputRef</span><span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=nx>type</span><span class=o>=</span><span class=p>{</span><span class=nx>type</span><span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=nx>defaultValue</span><span class=o>=</span><span class=p>{</span><span class=nx>defaultValue</span><span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=nx>onBlur</span><span class=o>=</span><span class=p>{</span><span class=nx>onBlur</span><span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=nx>disabled</span><span class=o>=</span><span class=p>{</span><span class=nx>disabled</span><span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=nx>onKeyUp</span><span class=o>=</span><span class=p>{</span><span class=nx>handleKeyUp</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></div><p>This component<code>TextInput</code> does a pretty interesting stuff, first, it handles the <code>KeyUp</code> event which sends information up to the parent(<code>InplaceEdit</code>) component, it can be disabled, the type is set as from the parent and the defaultValue is also configurable through the props.</p><p>And the <code>SelectInput</code>, I defined it to look like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>SelectInput</span> <span class=o>=</span> <span class=p>({</span> <span class=nx>options</span><span class=p>,</span> <span class=nx>defaultValue</span><span class=p>,</span> <span class=nx>onBlur</span><span class=p>,</span> <span class=nx>disabled</span> <span class=p>})</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=nx>select</span> <span class=nx>onChange</span><span class=o>=</span><span class=p>{</span><span class=nx>onBlur</span><span class=p>}</span> <span class=nx>defaultValue</span><span class=o>=</span><span class=p>{</span><span class=nx>defaultValue</span><span class=p>}</span> <span class=nx>disabled</span><span class=o>=</span><span class=p>{</span><span class=nx>disabled</span><span class=p>}</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span><span class=nx>options</span><span class=p>.</span><span class=nx>map</span><span class=p>(</span><span class=nx>option</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=o>&lt;</span><span class=nx>option</span> <span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=nx>option</span><span class=p>.</span><span class=nx>value</span><span class=p>}</span><span class=o>&gt;</span><span class=p>{</span><span class=nx>option</span><span class=p>.</span><span class=nx>label</span><span class=p>}</span><span class=o>&lt;</span><span class=err>/option&gt;;</span>
</span></span><span class=line><span class=cl>      <span class=p>})}</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=err>/select&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></div><p>This component(<code>SelectInput</code>) accepts the options as an array of object with <code>label</code> and <code>value</code> keys, <code>defaultValue</code> for persistence, <code>onBlur</code> event handler and can be disabled by setting its <code>disabled</code> props. Not too serious, I think.</p><p>For the EditDisplay, I had to render one of the two types of components based on the <code>inputType</code> props:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>EditDisplay</span> <span class=o>=</span> <span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>inputType</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>onchange</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>defaultValue</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>selectOptions</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>onBlur</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>disabled</span>
</span></span><span class=line><span class=cl><span class=p>})</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span><span class=nx>inputType</span> <span class=o>===</span> <span class=s2>&#34;select&#34;</span> <span class=o>&amp;&amp;</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>SelectInput</span>
</span></span><span class=line><span class=cl>          <span class=nx>options</span><span class=o>=</span><span class=p>{</span><span class=nx>selectOptions</span><span class=p>}</span>
</span></span><span class=line><span class=cl>          <span class=nx>defaultValue</span><span class=o>=</span><span class=p>{</span><span class=nx>defaultValue</span><span class=p>}</span>
</span></span><span class=line><span class=cl>          <span class=nx>onchange</span><span class=o>=</span><span class=p>{</span><span class=nx>onchange</span><span class=p>}</span>
</span></span><span class=line><span class=cl>          <span class=nx>onBlur</span><span class=o>=</span><span class=p>{</span><span class=nx>onBlur</span><span class=p>}</span>
</span></span><span class=line><span class=cl>          <span class=nx>disabled</span><span class=o>=</span><span class=p>{</span><span class=nx>disabled</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>)}</span>
</span></span><span class=line><span class=cl>      <span class=p>{[</span><span class=s2>&#34;text&#34;</span><span class=p>,</span> <span class=s2>&#34;password&#34;</span><span class=p>].</span><span class=nx>includes</span><span class=p>(</span><span class=nx>inputType</span><span class=p>)</span> <span class=o>&amp;&amp;</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>TextInput</span>
</span></span><span class=line><span class=cl>          <span class=nx>type</span><span class=o>=</span><span class=p>{</span><span class=nx>inputType</span><span class=p>}</span>
</span></span><span class=line><span class=cl>          <span class=nx>onchange</span><span class=o>=</span><span class=p>{</span><span class=nx>onchange</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>)}</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=err>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></div><p>Next, I thought, the <code>EditDisplay</code> component receives some props that are not yet defined in the <code>InplaceEdit</code> component, so I defined them like so:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>function</span> <span class=nx>InplaceEdit</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>text</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>inputType</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>defaultValue</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>valueToText</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>updateKey</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>onUpdate</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>})</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>[</span><span class=nx>showEditor</span><span class=p>,</span> <span class=nx>updateShowEditor</span><span class=p>]</span> <span class=o>=</span> <span class=nx>React</span><span class=p>.</span><span class=nx>useState</span><span class=p>(</span><span class=kc>false</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// Keeps the text synchronized
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=p>[</span><span class=nx>displayText</span><span class=p>,</span> <span class=nx>updateDisplayText</span><span class=p>]</span> <span class=o>=</span> <span class=nx>React</span><span class=p>.</span><span class=nx>useState</span><span class=p>(</span><span class=nx>text</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>handleShowEditor</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>updateShowEditor</span><span class=p>(</span><span class=kc>true</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// Callback for the onBlur event handler
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>handleEditorInputChange</span> <span class=o>=</span> <span class=nx>React</span><span class=p>.</span><span class=nx>useCallback</span><span class=p>(</span><span class=nx>e</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>value</span> <span class=o>=</span> <span class=nx>e</span><span class=p>.</span><span class=nx>currentTarget</span><span class=p>.</span><span class=nx>value</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Converts the value to a displayable text using a function from the parent consumer
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>text</span> <span class=o>=</span> <span class=k>typeof</span> <span class=nx>valueToText</span> <span class=o>===</span> <span class=s2>&#34;function&#34;</span> <span class=o>?</span> <span class=nx>valueToText</span><span class=p>(</span><span class=nx>value</span><span class=p>)</span> <span class=o>:</span> <span class=nx>value</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Updates the display text for synchronization
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>updateDisplayText</span><span class=p>(</span><span class=nx>text</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Hides the editor
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>updateShowEditor</span><span class=p>(</span><span class=kc>false</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>defaultValue</span> <span class=o>!==</span> <span class=nx>value</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=c1>// If the value has changed, we need to tell the consumer parents about it
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=kr>const</span> <span class=nx>handler</span> <span class=o>=</span> <span class=k>typeof</span> <span class=nx>onUpdate</span> <span class=o>===</span> <span class=s2>&#34;function&#34;</span> <span class=o>?</span> <span class=nx>onUpdate</span> <span class=o>:</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>      <span class=c1>// Sets the data returning an object containing the value in the updateKey or just the value itself
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=kr>const</span> <span class=nx>data</span> <span class=o>=</span> <span class=nx>updateKey</span> <span class=o>?</span> <span class=p>{</span> <span class=p>[</span><span class=nx>updateKey</span><span class=p>]</span><span class=o>:</span> <span class=nx>value</span> <span class=p>}</span> <span class=o>:</span> <span class=nx>value</span>
</span></span><span class=line><span class=cl>      <span class=c1>// Call the update function with the data and resource id
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>handler</span><span class=p>(</span><span class=nx>data</span><span class=p>,</span> <span class=nx>id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;&gt;</span>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=nx>div</span> <span class=nx>onClick</span><span class=o>=</span><span class=p>{</span><span class=nx>handleShowEditor</span><span class=p>}</span> <span class=nx>style</span><span class=o>=</span><span class=p>{{</span> <span class=nx>cursor</span><span class=o>:</span> <span class=s2>&#34;pointer&#34;</span> <span class=p>}}</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=nx>showEditor</span> <span class=o>?</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>          <span class=o>&lt;</span><span class=nx>EditDisplay</span>
</span></span><span class=line><span class=cl>            <span class=nx>inputType</span><span class=o>=</span><span class=p>{</span><span class=nx>inputType</span> <span class=o>||</span> <span class=s2>&#34;text&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=nx>defaultValue</span><span class=o>=</span><span class=p>{</span><span class=nx>defaultValue</span><span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=nx>onBlur</span><span class=o>=</span><span class=p>{</span><span class=nx>handleEditorInputChange</span><span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=nx>selectOptions</span><span class=o>=</span><span class=p>{</span><span class=nx>selectOptions</span><span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=nx>disabled</span><span class=o>=</span><span class=p>{</span><span class=nx>isUpdatingId</span> <span class=o>===</span> <span class=nx>id</span><span class=p>}</span>
</span></span><span class=line><span class=cl>          <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span> <span class=o>:</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>          <span class=o>&lt;</span><span class=nx>TextDisplay</span> <span class=nx>text</span><span class=o>=</span><span class=p>{</span><span class=nx>displayText</span><span class=p>}</span> <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>)}</span>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=err>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Noticeable from the above snippet is that, the <code>disabled</code> prop is only set if the <code>isUpdatingId</code> is equals to the <code>id</code> props, and the <code>&lt;TextDisplay /></code> now receives a <code>displayText</code> state which is synchronized across the two children of <code>InplaceEdit</code> component.</p><p>And guess what, that is all there is to an <code>InplaceEdit</code> component that returns just a single value. It should accept a value/text and toggles between input and text states, too damn simple, I think.</p><h2 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h2><p>This was a very interesting process for me, and I never regret it and never will. There are awesome React components for this and does better job than my local component. But I thougth, I should experiment a bit, and here I have it.</p><p>The full code is available as a gist <a href=https://gist.github.com/limistah/b91b5429c0a4f8062b26445d12877361>here</a>, if you want to check it out. And, thank you for reading.</p><p><a href="https://translate.google.com/#view=home&amp;op=translate&amp;sl=en&amp;tl=hi&amp;text=Thank%20you">Dhanyavaad</a>! ðŸ™‡</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://limistah.dev/tags/reactjs/>ReactJS</a></li></ul><nav class=paginav><a class=prev href=https://limistah.dev/posts/react-unexpected-closing-tag/><span class=title>Â« Prev</span><br><span>ReactJS - Unexpected closing tag</span>
</a><a class=next href=https://limistah.dev/posts/adonisjs-use-events/><span class=title>Next Â»</span><br><span>AdonisJS - Event</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share ReactJS - Inplace Edit component on x" href="https://x.com/intent/tweet/?text=ReactJS%20-%20Inplace%20Edit%20component&amp;url=https%3a%2f%2flimistah.dev%2fposts%2freactjs-inplace-edit-component%2f&amp;hashtags=ReactJS"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share ReactJS - Inplace Edit component on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2flimistah.dev%2fposts%2freactjs-inplace-edit-component%2f&amp;title=ReactJS%20-%20Inplace%20Edit%20component&amp;summary=ReactJS%20-%20Inplace%20Edit%20component&amp;source=https%3a%2f%2flimistah.dev%2fposts%2freactjs-inplace-edit-component%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share ReactJS - Inplace Edit component on reddit" href="https://reddit.com/submit?url=https%3a%2f%2flimistah.dev%2fposts%2freactjs-inplace-edit-component%2f&title=ReactJS%20-%20Inplace%20Edit%20component"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share ReactJS - Inplace Edit component on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2flimistah.dev%2fposts%2freactjs-inplace-edit-component%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share ReactJS - Inplace Edit component on whatsapp" href="https://api.whatsapp.com/send?text=ReactJS%20-%20Inplace%20Edit%20component%20-%20https%3a%2f%2flimistah.dev%2fposts%2freactjs-inplace-edit-component%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share ReactJS - Inplace Edit component on telegram" href="https://telegram.me/share/url?text=ReactJS%20-%20Inplace%20Edit%20component&amp;url=https%3a%2f%2flimistah.dev%2fposts%2freactjs-inplace-edit-component%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share ReactJS - Inplace Edit component on ycombinator" href="https://news.ycombinator.com/submitlink?t=ReactJS%20-%20Inplace%20Edit%20component&u=https%3a%2f%2flimistah.dev%2fposts%2freactjs-inplace-edit-component%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://limistah.dev>limistah</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>